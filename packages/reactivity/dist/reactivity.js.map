{
  "version": 3,
  "sources": ["../src/index.ts", "../src/effect.ts", "../../shared/src/index.ts", "../src/baseHandler.ts", "../src/reactive.ts"],
  "sourcesContent": ["export { effect } from './effect'\nexport { reactive } from './reactive'", "export let activeEffect = undefined\n\nfunction cleanupEffect (effect) {\n  const { deps } = effect\n\n  for (let i =0; i < deps.length; i++) {\n    deps[i].delete(effect)\n    effect.deps.length = 0\n  }\n}\nclass ReactiveEffect {\n  public active =  true\n  public parent = null\n  public deps = []\n  constructor (public fn) {\n\n  }\n  run () {\n    if (!this.active) {\n      this.fn()\n    }\n\n    try {\n      this.parent = activeEffect\n      activeEffect = this\n\n      cleanupEffect(this)\n      return this.fn()\n    } finally {\n      activeEffect = this.parent\n    }\n    \n  }\n}\n\nconst targetMap = new WeakMap()\nexport function effect (fn) {\n  const _effect = new ReactiveEffect(fn)\n}\n\n\nexport function track (target, type, key) {\n  if (!activeEffect) {\n    return\n  }\n  let depsMap = targetMap.get(target)\n  if (!depsMap) {\n    depsMap.set(target, (depsMap = new Map()))\n  }\n  let dep = depsMap.get(key)\n  if (!dep) {\n    depsMap.set(key, (dep = new Set()))\n  }\n  const shouldTrack = !dep.has(activeEffect)\n  if (shouldTrack) {\n    dep.add(activeEffect)\n    activeEffect.deps.push(dep)\n  }\n}\n\nexport function trigger (target, type, key, value, oldValue) {\n  const depsMap = targetMap.get(target)\n\n  if (!depsMap) return\n  let effects = depsMap.get(key)\n\n  if (effects) {\n    effects = new Set(effects)\n  }\n\n  effects && effects.forEach(effect => {\n    if (effect !== activeEffect) {\n      effect.run()\n    }\n  });\n}", "export const isObject = value => {\n  return typeof value === 'object' && value !== null\n}", "import { activeEffect, track, trigger } from './effect'\n\nexport { activeEffect } from './effect'\n\nexport const enum ReactiveFlags {\n  IS_REACTIVE = '__v_isReactive'\n}\n\nexport const mutableHandler = {\n  get (target, key, receiver) {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return true\n    }\n      track(target, 'get', key)\n    return Reflect.get(target, key, receiver)\n  },\n  set (target, key, value, receiver) {\n    const oldValue = target[key]\n\n    if (oldValue !== value) {\n      trigger(target, 'set', key, value, oldValue)\n    }\n    let result = Reflect.set(target, key, value, receiver)\n    return result\n  }\n}", "import { isObject } from \"@vue/shared\";\nimport {  ReactiveFlags, mutableHandler } from './baseHandler'\n\nconst targetMap = new WeakMap()\n\n\nexport function reactive (target) {\n  if (isObject(target)) {\n    return\n  }\n\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target\n  }\n\n  let existProxy = targetMap.get(target)\n  if (existProxy) {\n    return existProxy\n  }\n\n  const proxy = new Proxy(target, mutableHandler)\n  if (!targetMap[target]) {\n    targetMap.set(target, proxy)\n  }\n\n  return proxy\n}"],
  "mappings": "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",
  "names": []
}
